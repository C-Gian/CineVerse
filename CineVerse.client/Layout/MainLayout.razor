@using CineVerse.client.Components
@inherits LayoutComponentBase

<ToastContainerComponent />

<div class="layout-root">

    <!-- ▸ APP BAR ------------------------------------------------------>
    <div class="appbar">
        <button class="icon-btn" @onclick="ToggleDrawer">
            <i class="material-icons">menu</i>
        </button>

        <div class="logo-area">
            <img src="/cineverse-icon.png" width="38" />
            <span class="logo-text">CINEVERSE</span>
        </div>

        <div class="flex-spacer"></div>

        <div class="search-box">
            <span class="material-icons search-icon">search</span>
            <input type="text"
                   placeholder="Search for a movie…"
                   @bind-value="_query"
                   @bind-value:event="oninput"
                   @onkeydown="HandleKeyDown" />

            @if (!string.IsNullOrWhiteSpace(_query))
            {
                <button type="button" class="search-clear-btn" @onclick="ClearQuery">✕</button>
            }
        </div>

        <img class="avatar" src="https://i.pravatar.cc/40" />
    </div>

    <!-- ▸ MAIN --------------------------------------------------------->
    <div class="main-area">

        <!-- DRAWER -->
        <nav class="drawer @( _drawerOpen ? "open" : "closed")"
             style="--drawer-w:72px; padding: 0 1rem;">
            <ul class="nav-list">
                <li>
                    <a href="/" class="nav-link @(CurrentUrl == "/" ? "active" : null)">
                        <i class="material-icons">home</i>
                        <span class="nav-text">Home</span>
                    </a>
                </li>
                <li>
                    <a href="/movies/search" class="nav-link @(CurrentUrl == "/movies/search" ? "active" : null)">
                        <i class="material-icons">movie</i>
                        <span class="nav-text">Search Movies</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- BODY -->
        <main class="content-area">
            @Body
        </main>
    </div>
</div>