@inherits LayoutComponentBase
@inject MudTheme Theme

<MudThemeProvider Theme="Theme" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<div class="layout-root">

    <!-- ▸ APP BAR ------------------------------------------------------>
    <div class="appbar">
        <button class="icon-btn" @onclick="ToggleDrawer">
            <i class="material-icons">menu</i>
        </button>

        <div class="logo-area">
            <img src="/cineverse-icon.png" width="38" />
            <span class="logo-text">CINEVERSE</span>
        </div>

        <div class="flex-spacer"></div>

        <img class="avatar" src="https://i.pravatar.cc/40" />
    </div>

    <!-- ▸ MAIN --------------------------------------------------------->
    <div class="main-area">

        <!-- DRAWER -->
        <nav class="drawer @( _drawerOpen ? "open" : "closed")"
             style="--drawer-w:72px;">
            <ul class="nav-list">
                <li>
                    <a href="/" class="nav-link @(CurrentUrl=="/" ? "active":null)">
                        <i class="material-icons">home</i>
                        <span class="nav-text">Home</span>
                    </a>
                </li>
                <li>
                    <a href="/movies/search" class="nav-link @(CurrentUrl=="/movies/search" ? "active":null)">
                        <i class="material-icons">movie</i>
                        <span class="nav-text">All Movies</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- CONTENUTO PAGINA -->
        <main class="content-area">
            @Body
        </main>
    </div>
</div>

@code {
    private bool _drawerOpen = true;
    private void ToggleDrawer() => _drawerOpen = !_drawerOpen;

    private string CurrentUrl => NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
    [Inject] private NavigationManager NavigationManager { get; set; } = default!;
}
